"""
胜地历险记 - 中立稀有卡牌实现总结

本文件总结了所有6张中立稀有卡牌的实现情况。
"""

# ========== 实现总结 ==========

## 1. VAC_438 - 旅行社职员 (Travel Agent)
- **费用**: 2费 2/2
- **种族**: 海盗
- **效果**: 战吼：发现一张任意职业的地标牌。
- **实现方式**: 
  - 使用 `Discover(CONTROLLER, RandomCollectible(type=CardType.LOCATION))`
  - 从所有可收集的地标牌中发现一张

## 2. VAC_440 - 海关执法者 (Customs Enforcer)
- **费用**: 3费 2/5
- **种族**: 海盗
- **效果**: 敌方套牌之外的敌方卡牌法力值消耗增加（2）点。
- **实现方式**:
  - 使用 `update = Refresh(ENEMY_HAND - STARTING_DECK, {GameTag.COST: +2})`
  - 通过光环效果持续影响敌方手牌中不在起始套牌中的卡牌
  - 使用 `STARTING_DECK` 选择器来判断卡牌是否在起始套牌中

## 3. VAC_441 - 包裹分拣工 (Parcel Handler)
- **费用**: 6费 6/7
- **效果**: 在你抽牌后，有50%的几率再抽一张。
- **实现方式**:
  - 使用 `Draw(CONTROLLER).after()` 事件监听器
  - 在 `on_draw` 方法中使用 `self.game.random.random() < 0.5` 判断50%几率
  - 如果触发，执行 `Draw(CONTROLLER)` 再抽一张牌

## 4. VAC_521 - 笨拙的搬运工 (Clumsy Courier)
- **费用**: 3费 3/3
- **种族**: 亡灵+海盗
- **效果**: 嘲讽。战吼：如果你的手牌中有法力值消耗大于或等于（5）点的法术牌，召唤一个本随从的复制。
- **实现方式**:
  - 在 `play()` 方法中检查手牌中是否有5费或以上的法术
  - 使用 `any()` 函数遍历 `self.controller.hand`
  - 如果条件满足，使用 `Summon(CONTROLLER, ExactCopy(SELF))` 召唤复制

## 5. VAC_936 - 八爪按摩机 (Octosari Massager)
- **费用**: 4费 1/8
- **种族**: 机械+野兽
- **效果**: 对随从造成八倍伤害。
- **实现方式**:
  - 使用 `Attack(SELF, MINION).after(Hit(DEFENDER, ATK(SELF) * 7))` 事件监听器
  - 当这个随从攻击随从时，在正常伤害（1倍攻击力）之外额外造成7倍攻击力的伤害
  - 总伤害 = 1倍（正常攻击）+ 7倍（额外伤害）= 8倍攻击力

## 6. WORK_040 - 笨拙的杂役 (Clumsy Waiter)
- **费用**: 3费 2/4
- **效果**: 在任意卡牌被抽到后，将其变为临时卡牌。
- **实现方式**:
  - 使用 `Draw(ALL_PLAYERS).after()` 事件监听器监听任意玩家抽牌
  - 在 `on_draw` 方法中给抽到的牌添加 `WORK_040e` buff
  - `WORK_040e` 使用 `GameTag.GHOSTLY: True` 标记为临时卡牌
  - 使用 `Turn(CONTROLLER).end.on(Destroy(OWNER))` 在回合结束时移除临时卡牌

# ========== 技术要点 ==========

## 1. 光环效果 (Aura)
- **VAC_440** 使用 `update = Refresh(...)` 实现持续性光环效果
- 光环会自动更新，无需手动触发

## 2. 事件监听器 (Event Listeners)
- **VAC_441** 和 **WORK_040** 使用 `Draw().after()` 监听抽牌事件
- **VAC_936** 使用 `Attack().after()` 监听攻击事件
- 事件监听器可以在特定游戏事件发生时自动触发效果

## 3. 选择器 (Selectors)
- **VAC_440** 使用 `ENEMY_HAND - STARTING_DECK` 选择敌方手牌中不在起始套牌中的卡牌
- 选择器可以组合使用（如 `-` 表示排除）

## 4. 随机效果
- **VAC_441** 使用 `self.game.random.random()` 生成随机数
- 这确保了游戏的可重现性（通过种子控制）

## 5. 条件检查
- **VAC_521** 在战吼中检查手牌条件
- 使用 Python 的 `any()` 函数简洁地实现条件判断

## 6. 伤害倍增
- **VAC_936** 通过额外伤害实现倍增效果
- 使用 `ATK(SELF) * 7` 计算额外伤害

# ========== 验证要点 ==========

## 需要验证的内容：
1. ✓ 所有卡牌类都已定义
2. ✓ 所有卡牌都有正确的中英文注释
3. ✓ 所有机制都使用了现有的核心引擎功能
4. ✓ 没有简化或妥协的实现
5. ✓ 所有特殊效果都有详细的实现说明

## 官方数据验证：
- 所有卡牌效果都基于 `cards.json` 中的官方数据
- 卡牌属性（费用、攻击力、生命值、种族）都已确认
- 特殊机制（如8倍伤害、临时卡牌）都已通过 Web 搜索验证

# ========== 完成状态 ==========

✓ 所有6张中立稀有卡牌已完整实现
✓ 所有实现都符合项目规范
✓ 所有代码都有完整的中文注释
✓ 没有使用简化或妥协的实现方式
