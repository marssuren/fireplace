# Badlands 死亡骑士卡牌实现总结

## 实现状态

已完成 Badlands 扩展包死亡骑士职业的所有 13 张卡牌实现。

## 卡牌清单

### COMMON (普通) - 5张

1. **DEEP_016** - 石英碎击槌 ✅
   - 类型: 武器 (4费 3/3)
   - 效果: 吸血。冻结任何受到你的英雄伤害的角色。
   - 实现: 完整实现,使用 Attack 事件监听

2. **DEEP_017** - 采矿事故 ✅
   - 类型: 法术 (2费)
   - 效果: 召唤两个1/1并具有"亡语:召唤一个1/1的脆弱的食尸鬼"的白银之手新兵。
   - 实现: 完整实现,包含 token 卡牌 DEEP_017t 和 DEEP_017t2

3. **WW_352** - 自埋自收 ✅
   - 类型: 法术 (3费)
   - 效果: 造成$3点伤害。发掘一个宝藏。
   - 实现: 完整实现,使用 Excavate 动作

4. **WW_354** - 残骸遍野 ✅
   - 类型: 法术 (1费)
   - 效果: 对一个随从造成等同于你残骸数量的伤害。
   - 实现: 完整实现,动态计算伤害

5. **WW_358** - 农场小助手 ⚠️
   - 类型: 随从 (3费 4/3 亡灵)
   - 效果: 战吼:发现一张亡灵牌。快枪:其法力值消耗减少(2)点。
   - 实现: 部分实现
   - **待完善**: 快枪机制需要核心支持

### RARE (稀有) - 4张

6. **DEEP_015** - 义肢假手 ⚠️
   - 类型: 随从 (3费 3/1 机械)
   - 效果: 磁力。复生。可以磁力吸附在机械或亡灵上。
   - 实现: 基础实现
   - **待完善**: 特殊磁力机制(吸附在亡灵上)需要扩展

7. **WW_322** - 骷髅矿工 ⚠️
   - 类型: 随从 (4费 3/3 亡灵)
   - 效果: 战吼:发掘一个宝藏。其法力值消耗为(0)点。
   - 实现: 部分实现
   - **待完善**: 需要扩展 Excavate 动作以返回生成的卡牌,然后修改其费用

8. **WW_324** - 白骨堆 ⚠️
   - 类型: 随从 (2费 2/1 亡灵)
   - 效果: 亡语:下次你发掘时,重新召唤本随从。
   - 实现: 部分实现
   - **待完善**: 需要在 Excavate 动作中添加事件触发机制

9. **WW_368** - 耕地轮作 ✅
   - 类型: 法术 (3费)
   - 效果: 召唤四个1/1并具有突袭的亡灵,它们在回合结束时死亡。
   - 实现: 完整实现,包含 token 卡牌 WW_368t

### EPIC (史诗) - 2张

10. **WW_356** - 泥犁耕牛 ⚠️
    - 类型: 随从 (7费 7/7 亡灵/野兽)
    - 效果: 嘲讽。战吼:如果你已经发掘过两次,你本回合的下一张牌法力值消耗减少(7)点。
    - 实现: 部分实现
    - **待完善**: "下一张牌减少(7)费"的 buff 机制需要实现

11. **WW_374** - 凉心农场 ✅
    - 类型: 法术 (3费)
    - 效果: 消耗至多8份残骸,召唤一个法力值消耗等同于此的随从。
    - 实现: 完整实现

### LEGENDARY (传说) - 2张

12. **WW_357** - 老腐和老墓 ✅
    - 类型: 随从 (4费 2/8 亡灵)
    - 效果: 在你的回合结束时,获得5份残骸。在你的回合开始时,消耗5份残骸,使你的英雄获得+5点生命值。
    - 实现: 完整实现,包含 buff WW_357e

13. **WW_373** - 矿坑老板雷斯卡 ⚠️
    - 类型: 随从 (20费 6/3 亡灵)
    - 效果: 突袭。在本局对战中每有一个随从死亡,本牌的法力值消耗便减少(1)点。亡语:夺取一个随机敌方随从的控制权。
    - 实现: 部分实现
    - **待完善**: 需要在 Game 中添加 `minions_died_this_game` 计数器

## 需要扩展的核心机制

### 1. Quickdraw (快枪) 机制
- **影响卡牌**: WW_358
- **需求**: 检测卡牌是否从牌库顶抽到
- **建议**: 在 Draw 动作中添加标记,在卡牌打出时检查

### 2. Excavate 返回值
- **影响卡牌**: WW_322
- **需求**: Excavate 动作需要返回生成的卡牌引用
- **建议**: 修改 Excavate 动作的 do 方法,返回添加的卡牌

### 3. Excavate 事件触发
- **影响卡牌**: WW_324
- **需求**: 在 Excavate 动作中添加事件广播
- **建议**: 在 Excavate 动作完成后广播事件,供其他卡牌监听

### 4. 下一张牌减费机制
- **影响卡牌**: WW_356
- **需求**: 实现"下一张打出的牌减少(X)费"的 buff
- **建议**: 参考类似的"下一张法术减费"机制

### 5. 全局随从死亡计数
- **影响卡牌**: WW_373
- **需求**: 在 Game 对象中追踪本局对战死亡的随从数量
- **建议**: 在 Death 事件中增加计数器

### 6. 磁力扩展
- **影响卡牌**: DEEP_015
- **需求**: 磁力机制支持吸附在亡灵上
- **建议**: 扩展 Magnetic 机制的目标检测逻辑

## 实现质量

- ✅ **完整实现**: 7/13 (54%)
- ⚠️ **部分实现**: 6/13 (46%)
- ❌ **未实现**: 0/13 (0%)

## 代码规范

- ✅ 所有卡牌都有中文注释
- ✅ 使用 fireplace DSL 标准语法
- ✅ 遵循项目代码风格
- ✅ 包含必要的 TODO 标记
- ✅ 说明了需要核心支持的功能

## 下一步建议

1. **优先级高**: 实现 Quickdraw 核心机制(影响多个职业)
2. **优先级高**: 扩展 Excavate 动作以支持返回值和事件触发
3. **优先级中**: 实现全局随从死亡计数
4. **优先级中**: 实现下一张牌减费机制
5. **优先级低**: 扩展磁力机制支持亡灵

## 测试建议

建议创建单元测试验证以下功能:
- Excavate 机制的正确性
- 残骸消耗和获得
- 回合结束/开始触发效果
- 费用减免计算
- Token 卡牌的正确生成
